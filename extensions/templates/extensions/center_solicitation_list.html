{% extends "centers/base.html" %}

{% load org_tags %}
{% load static from staticfiles %}

{% block title %}{{ company.name }} - Solicitação de Ramais{% endblock %}

{% block center-content %}
<h2 class="ui dividing grey header">
  <i class="sticky note outline icon"></i> Solicitações de Faixa de Ramais
</h2>
<table class="ui selectable bottom attached compact table">
  <thead>
    <tr>
      <th>Faixas de Ramais</th>
      <th>Criado em</th>
      <th>Modificado em</th>
      <th>Status</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for solicitation in solicitation_list %}
      <tr>
        <td>{{ solicitation.extension_range }}</td>
        <td data-label="created">{{ solicitation.created|date:"d/m/Y" }} às {{ solicitation.created|time:"H:i" }}</td>
        <td data-label="modified">{{ solicitation.modified|date:"d/m/Y" }} às {{ solicitation.modified|time:"H:i" }}</td>
        <td data-label="status">
          {% include 'extensions/solicitation_status_label.html' with status=solicitation.status %}
        </td>
        <td class="collapsing">
          {% if solicitation.status == 1 %} {# SOLICITATION_OPENED #}
            <form action="{% url 'extensions:company_solicitation_update' organization.slug company.slug solicitation.pk %}" method="post">
              {% csrf_token %}
              <input name='status' value='3' type='hidden'> {# SOLICITATION_CANCELED #}
              <button class="ui inverted red button" type="submit">
                <i class="ban icon"></i> Cancelar
              </button>
            </form>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      {% include "utils/empty-tbody.html" with search=request.GET.search %}
    {% endfor %}
  </tbody>
  <tfoot>
    <tr>
      <th colspan="3">
        {% if is_paginated %}
          {% include "utils/pagination.html" with page_obj=page_obj paginator=paginator page_range=page_range %}
        {% endif %}
      </th>
      <th colspan="2">
        <div class="ui grid">
          <div class="right aligned right floated column">
            <div class="ui label">
              TOTAL
              <div class="detail">{{ paginator.count }}</div>
            </div>
          </div>
        </div>
      </th>
    </tr>
  </tfoot>
</table>
{% endblock %}